<!DOCTYPE html>
<html>

<head>
    <meta charset='utf-8'>
    <meta http-equiv='X-UA-Compatible' content='IE=edge'>
    <title>pdf-iframe</title>
    <meta name='viewport' content='width=device-width, initial-scale=1'>
    <style>
        #img-wrapper {
            overflow: scroll;
            width: 50vw;
            height: 50vh;
            margin: 0 auto;
        }
        #img {
            transform-origin: top left;
        }
    </style>
    <script src="https://code.jquery.com/jquery-3.7.1.min.js" integrity="sha256-/JqT3SQfawRcv/BIHPThkBvs0OEvtFFmqPF/lYI/Cxo=" crossorigin="anonymous"></script>
</head>

<body>

    <h1>Zoomテスト</h1>
    <div id="img-wrapper">
        <img id="img" class="js-pinch-img" src="./sample.png" >
    </div>


    <script>
    let scale = 1;
    let startDist = 0;

    function getDist(t1, t2) {
      const dx = t2.clientX - t1.clientX;
      const dy = t2.clientY - t1.clientY;
      return Math.hypot(dx, dy);
    }

    $('.js-pinch-img')
      .on('touchstart', function(e) {
        const touches = e.originalEvent.touches;
        if (touches.length === 2) {
          startDist = getDist(touches[0], touches[1]);
        }
      })
      .on('touchmove', function(e) {
        const touches = e.originalEvent.touches;

        if (touches.length === 2) {
          e.preventDefault(); // ブラウザの標準ピンチを止める

          const newDist = getDist(touches[0], touches[1]);
          const ratio = newDist / startDist;
          startDist = newDist;

          scale *= ratio;
          scale = Math.max(scale, 0.5); // 最小は0.5までとする。

          $(this).css('transform', `scale(${scale})`);
        }
      });

    </script>



</body>

</html>


